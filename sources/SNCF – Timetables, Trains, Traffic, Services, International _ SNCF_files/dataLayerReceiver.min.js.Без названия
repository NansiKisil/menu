(function(a){'use strict';function e(a){this.dataLayerByName=[];this.callBack=a};function t(a){for(var e=a.length-1;e>=0;e--){if(a[e].autoDetach){a.splice(e,1)}}};e.prototype.emit=function(a,i){var r=!0;for(var e=0;e<this.dataLayerByName.length;e++){if(this.dataLayerByName[e].name===a){this.dataLayerByName[e].emitted=!0;if(i){this.dataLayerByName[e].data=i}};if(this.dataLayerByName[e].emitted===!1){r=!1}};if(r){const cloneDataLayer=this.dataLayerByName;this.callBack(JSON.parse(JSON.stringify(cloneDataLayer)));for(var n=0;n<this.dataLayerByName.length;n++){if(this.dataLayerByName[n].autoClear){this.dataLayerByName[n].emitted=!1;delete this.dataLayerByName[n].data}};t(this.dataLayerByName)}};e.prototype.attach=function(a,e,t){var n=typeof t!=='undefined'?t:!1,i=typeof e!=='undefined'?e:!1;this.dataLayerByName.push({name:a,emitted:!1,autoClear:i,autoDetach:n})};function n(t){var e={};if(drupalSettings.drupalDataLayer['#data_layer']){e=a.extend(e,drupalSettings.drupalDataLayer['#data_layer'])};t.forEach(function(t){if(t.name=='resultItineraryDataLayerEmitter'&&t.data.length>0){var n={};t.data.forEach(function(e){if(e.length>1&&e[0]=='TRAJET_CONSEILLE'){n=a.extend(n,{sncfItineraireMIV_trajetConseille:e[1]})}
else if(e.length>1&&e[0]=='MOINS_MARCHE'){n=a.extend(n,{sncfItineraireMIV_moinsDeMarche:e[1]})}
else if(e.length>1&&e[0]=='MOINS_CORRESPONDANCE'){n=a.extend(n,{sncfItineraireMIV_moinsDeChangements:e[1]})}});e=a.extend(e,n)}
else if(t.name=='arianeDataLayerEmitter'&&t.data){if(t.data.firstElement){e=a.extend(e,{sncfGlobal_pageCat1:t.data.firstElement})}
else{e.sncfGlobal_pageCat1=''};if(t.data.secondElement){e=a.extend(e,{sncfGlobal_pageCat2:t.data.secondElement})}
else{e.sncfGlobal_pageCat2=''};if(t.data.thirdElement){e=a.extend(e,{sncfGlobal_pageCat3:t.data.thirdElement})}
else{e.sncfGlobal_pageCat3=''}}
else if(t.name=='sourceDonneesDataLayerEmitter'&&t.data){e=a.extend(e,{sncfItineraireMIV_sourceDonnees:t.data})}
else if(t.name=='mapBoolDataLayerEmitter'&&t.data){e=a.extend(e,{sncfItineraireMIV_cartographie:t.data.isMapDisplay})}
else if(t.name!='pubDOMContentLoaded'&&t.data){e=a.extend(e,t.data)}});var n=a.extend({event:'dataLayerReady'},e);dataLayer.push(n)};window.sncDataLayerReceiver=new e(n);window.sncDataLayerReceiver.attach('pubDOMContentLoaded');window.addEventListener('DOMContentLoaded',function(){window.sncDataLayerReceiver.emit('pubDOMContentLoaded')})})(jQuery,this);